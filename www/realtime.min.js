var RT={debugging:false,plugins:{},socket:null,channelMethods:{},identity:null,notifyOpen:false,options:{strip:false,htmlEntities:true,dateFormat:"longTime",daysToSave:1,port:8001,resource:"realtime",channelsCookie:"realTime_channels",identityCookie:"realTime_identity",server:"localhost",socketURL:"http://cdn.socket.io/stable/socket.io.js"},connect:function(a,b,d){var c=RT._connect(a,b,d)},_connect:function(a,b,c){this.socket=new io.Socket((b&&b.server)||this.options.server,{port:(b&&b.port)||this.options.port,rememberTransport:false,resource:(b&&b.resource)||this.options.resource});this.socket.connect();for(i in b){if(typeof b[i]=="object"){for(j in b[i]){this.options[i][j]=b[i][j]}}else{this.options[i]=b[i]}}if(this.options.stripHTML){this.options.strip=/<[^>]*>/gi}this.saveIdentity(a);this.debug("savedChannels: ",this.getSavedChannles());this.socket.addEvent("connect",function(){var d={type:"command",identity:a,data:{command:"init",options:{channels:RT.getSavedChannles()}}};RT.socket.send(d);RT.debug("init: ",d);if(c){c()}});this.socket.addEvent("message",function(e){if(typeof(e)!="object"){e=JSON.parse(e)}RT.debug("Incoming Message ["+e.channel+"]: ",e);if(e.type&&e.channel){var f=e.channel;var d=RT.channelMethods[f];switch(e.type){case"message":if(d._hasMethod("onReceive")){if(RT.options.strip||RT.options.htmlEntities){var g=JSON.stringify(e.data,function(h,k){if(typeof k==="string"){if(RT.options.strip){return k.replace(RT.options.strip,"")}else{if(RT.options.htmlEntities){return k.replace(/</,"&lt;").replace(/>/,"&gt;")}}}return k});e.data=JSON.parse(g)}e.timestamp=RT.formatDate(e.timestamp);d.onReceive(e);RT.debug("Calling Channel Method: ",f)}break;case"command":if(d._hasMethod(e.data.command)){if((e.data.options&&!e.data.options.notMe)||(e.identity!=RT.identity)){e.timestamp=RT.formatDate(e.timestamp);d[e.data.command]({identity:e.identity,timestamp:e.timestamp});RT.debug("Command: ["+f+"]["+e.data.command+"]",e)}}break;default:break}}})},saveIdentity:function(a){if(a&&typeof(a)=="string"){this.identity=a;setCookie(this.options.identityCookie,a,this.options.daysToSave)}},clearIdentity:function(){setCookie(this.options.identityCookie,"",0);this.identity=null},saveChannel:function(b){var a=this.getSavedChannles();if(a){if(!inArray(b,a)){a.push(b)}setCookie(this.options.channelsCookie,a.join(","),this.options.daysToSave)}},unSaveChannel:function(c){var a=this.getSavedChannles();if(a){var b=a.indexOf(c);if(b!=-1){a.splice(b,1)}setCookie(this.options.channelsCookie,a.join(","),this.options.daysToSave)}},getSavedChannles:function(){var a=getCookie(this.options.channelsCookie);if(a){return a.split(",")}else{return false}},subscribe:function(a){if(!this.socket){this.connect()}if(typeof(a)=="string"){a=new Array(a)}for(i in a){var b=a[i];this.debug("Subscription: ",b);try{this.socket.send({type:"command",channel:b,data:{command:"subscribe"}});this.saveChannel(b)}catch(c){throw ("You need to subscribe in the connect() call")}}},unsubscribe:function(a){if(typeof(a)=="string"){a=new Array(a)}for(i in a){var b=a[i];this.debug("Subscription: ",b);this.socket.send({type:"command",channel:b,data:{command:"unsubscribe"}});this.unSaveChannel(b)}},publish:function(a,b){if(!this.socket){this.connect()}this.debug("Publishing ["+a+"]: ",b);this.socket.send({type:"message",channel:a,data:{msg:b}});if(this.channelMethods[a]){if(typeof(this.channelMethods[a].onSend)=="function"){this.channelMethods[a].onSend(b)}}else{this.debug("Channel "+a+" not created")}},createChannel:function(b,a){this.channelMethods[b]=a;this.channelMethods[b]["_hasMethod"]=function(c){return typeof(this[c])=="function"};this.channelMethods[b]["_triggerEvent"]=function(d,c){this.triggerEvent(b,d,c)};this.debug("Creating Channel: ",b)},triggerEvent:function(c,b,a){this.debug("triggerEvent: ",b);this.socket.send({type:"command",channel:c,data:{command:b,options:a}})},debug:function(a,c){try{if(this.debugging&&window.console&&console.log){console.log(a,c)}}catch(b){}},formatDate:function(a){if(this.options.dateFormat){var b=new Date(Date(a));return b.format(this.options.dateFormat)}else{return a}},addMessageEvent:function(a,b){this.socket.addEvent("message",function(c){if(typeof(c)!="object"){c=JSON.parse(c)}if(c.type=="message"&&c.channel==a){c.timestamp=RT.formatDate(c.timestamp);b(c)}})},addCommandEvent:function(a,b,c){this.socket.addEvent("message",function(d){if(typeof(d)!="object"){d=JSON.parse(d)}if(d.type=="command"&&d.data.command==b&&d.channel==a){d.timestamp=RT.formatDate(d.timestamp);c(d)}})}};function setCookie(a,d,b){var e=new Date();e.setDate(e.getDate()+b);var c=escape(d)+((b==null)?"":"; expires="+e.toUTCString());document.cookie=a+"="+c}function getCookie(b){var c,a,e,d=document.cookie.split(";");for(c=0;c<d.length;c++){a=d[c].substr(0,d[c].indexOf("="));e=d[c].substr(d[c].indexOf("=")+1);a=a.replace(/^\s+|\s+$/g,"");if(a==b){return unescape(e)}}}function inArray(e,d,c){var b="",a=!!c;if(a){for(b in d){if(d[b]===e){return true}}}else{for(b in d){if(d[b]==e){return true}}}return false}function loadScript(b,c){var a=document.createElement("script");a.type="text/javascript";if(a.readyState){a.onreadystatechange=function(){if(a.readyState=="loaded"||a.readyState=="complete"){a.onreadystatechange=null;c()}}}else{a.onload=function(){c()}}a.src=b;document.getElementsByTagName("head")[0].appendChild(a)}var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g,c=function(f,e){f=String(f);e=e||2;while(f.length<e){f="0"+f}return f};return function(k,x,t){var g=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(k)=="[object String]"&&!/\d/.test(k)){x=k;k=undefined}k=k?new Date(k):new Date;if(isNaN(k)){throw SyntaxError("invalid date")}x=String(g.masks[x]||x||g.masks["default"]);if(x.slice(0,4)=="UTC:"){x=x.slice(4);t=true}var v=t?"getUTC":"get",p=k[v+"Date"](),e=k[v+"Day"](),l=k[v+"Month"](),r=k[v+"FullYear"](),u=k[v+"Hours"](),n=k[v+"Minutes"](),w=k[v+"Seconds"](),q=k[v+"Milliseconds"](),f=t?0:k.getTimezoneOffset(),h={d:p,dd:c(p),ddd:g.i18n.dayNames[e],dddd:g.i18n.dayNames[e+7],m:l+1,mm:c(l+1),mmm:g.i18n.monthNames[l],mmmm:g.i18n.monthNames[l+12],yy:String(r).slice(2),yyyy:r,h:u%12||12,hh:c(u%12||12),H:u,HH:c(u),M:n,MM:c(n),s:w,ss:c(w),l:c(q,3),L:c(q>99?Math.round(q/10):q),t:u<12?"a":"p",tt:u<12?"am":"pm",T:u<12?"A":"P",TT:u<12?"AM":"PM",Z:t?"UTC":(String(k).match(b)||[""]).pop().replace(d,""),o:(f>0?"-":"+")+c(Math.floor(Math.abs(f)/60)*100+Math.abs(f)%60,4),S:["th","st","nd","rd"][p%10>3?0:(p%100-p%10!=10)*p%10]};return x.replace(a,function(m){return m in h?h[m]:m.slice(1,m.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(a,b){return dateFormat(this,a,b)};this.io={version:"0.6",setPath:function(a){if(window.console&&console.error){console.error("io.setPath will be removed. Please set the variable WEB_SOCKET_SWF_LOCATION pointing to WebSocketMain.swf")}this.path=/\/$/.test(a)?a:a+"/";WEB_SOCKET_SWF_LOCATION=a+"lib/vendor/web-socket-js/WebSocketMain.swf"}};if("jQuery" in this){jQuery.io=this.io}if(typeof window!="undefined"){WEB_SOCKET_SWF_LOCATION="/socket.io/lib/vendor/web-socket-js/WebSocketMain.swf"}(function(){var a=false;io.util={ios:false,load:function(b){if(document.readyState=="complete"||a){return b()}if("attachEvent" in window){window.attachEvent("onload",b)}else{window.addEventListener("load",b,false)}},inherit:function(d,b){for(var c in b.prototype){d.prototype[c]=b.prototype[c]}},indexOf:function(b,e,f){for(var c=b.length,d=(f<0)?Math.max(0,c+f):f||0;d<c;d++){if(b[d]===e){return d}}return -1},isArray:function(b){return Object.prototype.toString.call(b)==="[object Array]"},merge:function(d,b){for(var c in b){if(b.hasOwnProperty(c)){d[c]=b[c]}}}};io.util.ios=/iphone|ipad/i.test(navigator.userAgent);io.util.android=/android/i.test(navigator.userAgent);io.util.opera=/opera/i.test(navigator.userAgent);io.util.load(function(){a=true})})();(function(){var a="~m~",b=function(c){if(Object.prototype.toString.call(c)=="[object Object]"){if(!("JSON" in window)){if("console" in window&&console.error){console.error("Trying to encode as JSON, but JSON.stringify is missing.")}return'{ "$error": "Invalid message" }'}return"~j~"+JSON.stringify(c)}else{return String(c)}};Transport=io.Transport=function(d,c){this.base=d;this.options={timeout:15000};io.util.merge(this.options,c)};Transport.prototype.send=function(){throw new Error("Missing send() implementation")};Transport.prototype.connect=function(){throw new Error("Missing connect() implementation")};Transport.prototype.disconnect=function(){throw new Error("Missing disconnect() implementation")};Transport.prototype._encode=function(g){var d="",f,g=io.util.isArray(g)?g:[g];for(var e=0,c=g.length;e<c;e++){f=g[e]===null||g[e]===undefined?"":b(g[e]);d+=a+f.length+a+f}return d};Transport.prototype._decode=function(g){var f=[],e,h;do{if(g.substr(0,3)!==a){return f}g=g.substr(3);e="",h="";for(var d=0,c=g.length;d<c;d++){h=Number(g.substr(d,1));if(g.substr(d,1)==h){e+=h}else{g=g.substr(e.length+a.length);e=Number(e);break}}f.push(g.substr(0,e));g=g.substr(e)}while(g!=="");return f};Transport.prototype._onData=function(f){this._setTimeout();var e=this._decode(f);if(e&&e.length){for(var d=0,c=e.length;d<c;d++){this._onMessage(e[d])}}};Transport.prototype._setTimeout=function(){var c=this;if(this._timeout){clearTimeout(this._timeout)}this._timeout=setTimeout(function(){c._onTimeout()},this.options.timeout)};Transport.prototype._onTimeout=function(){this._onDisconnect()};Transport.prototype._onMessage=function(c){if(!this.sessionid){this.sessionid=c;this._onConnect()}else{if(c.substr(0,3)=="~h~"){this._onHeartbeat(c.substr(3))}else{if(c.substr(0,3)=="~j~"){this.base._onMessage(JSON.parse(c.substr(3)))}else{this.base._onMessage(c)}}}},Transport.prototype._onHeartbeat=function(c){this.send("~h~"+c)};Transport.prototype._onConnect=function(){this.connected=true;this.connecting=false;this.base._onConnect();this._setTimeout()};Transport.prototype._onDisconnect=function(){this.connecting=false;this.connected=false;this.sessionid=null;this.base._onDisconnect()};Transport.prototype._prepareUrl=function(){return(this.base.options.secure?"https":"http")+"://"+this.base.host+":"+this.base.options.port+"/"+this.base.options.resource+"/"+this.type+(this.sessionid?("/"+this.sessionid):"/")}})();(function(){var d=new Function,a=(function(){if(!("XMLHttpRequest" in window)){return false}var e=new XMLHttpRequest();return e.withCredentials!=undefined})(),c=function(h){if("XDomainRequest" in window&&h){return new XDomainRequest()}if("XMLHttpRequest" in window&&(!h||a)){return new XMLHttpRequest()}if(!h){try{var g=new ActiveXObject("MSXML2.XMLHTTP");return g}catch(k){}try{var f=new ActiveXObject("Microsoft.XMLHTTP");return f}catch(k){}}return false},b=io.Transport.XHR=function(){io.Transport.apply(this,arguments);this._sendBuffer=[]};io.util.inherit(b,io.Transport);b.prototype.connect=function(){this._get();return this};b.prototype._checkSend=function(){if(!this._posting&&this._sendBuffer.length){var e=this._encode(this._sendBuffer);this._sendBuffer=[];this._send(e)}};b.prototype.send=function(e){if(io.util.isArray(e)){this._sendBuffer.push.apply(this._sendBuffer,e)}else{this._sendBuffer.push(e)}this._checkSend();return this};b.prototype._send=function(f){var e=this;this._posting=true;this._sendXhr=this._request("send","POST");this._sendXhr.onreadystatechange=function(){var g;if(e._sendXhr.readyState==4){e._sendXhr.onreadystatechange=d;try{g=e._sendXhr.status}catch(h){}e._posting=false;if(g==200){e._checkSend()}else{e._onDisconnect()}}};this._sendXhr.send("data="+encodeURIComponent(f))};b.prototype.disconnect=function(){this._onDisconnect();return this};b.prototype._onDisconnect=function(){if(this._xhr){this._xhr.onreadystatechange=this._xhr.onload=d;this._xhr.abort();this._xhr=null}if(this._sendXhr){this._sendXhr.onreadystatechange=this._sendXhr.onload=d;this._sendXhr.abort();this._sendXhr=null}this._sendBuffer=[];io.Transport.prototype._onDisconnect.call(this)};b.prototype._request=function(f,h,e){var g=c(this.base._isXDomain());if(e){g.multipart=true}g.open(h||"GET",this._prepareUrl()+(f?"/"+f:""));if(h=="POST"&&"setRequestHeader" in g){g.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8")}return g};b.check=function(f){try{if(c(f)){return true}}catch(g){}return false};b.xdomainCheck=function(){return b.check(true)};b.request=c})();(function(){var a=io.Transport.websocket=function(){io.Transport.apply(this,arguments)};io.util.inherit(a,io.Transport);a.prototype.type="websocket";a.prototype.connect=function(){var b=this;this.socket=new WebSocket(this._prepareUrl());this.socket.onmessage=function(c){b._onData(c.data)};this.socket.onclose=function(c){b._onClose()};return this};a.prototype.send=function(b){if(this.socket){this.socket.send(this._encode(b))}return this};a.prototype.disconnect=function(){if(this.socket){this.socket.close()}return this};a.prototype._onClose=function(){this._onDisconnect();return this};a.prototype._prepareUrl=function(){return(this.base.options.secure?"wss":"ws")+"://"+this.base.host+":"+this.base.options.port+"/"+this.base.options.resource+"/"+this.type+(this.sessionid?("/"+this.sessionid):"")};a.check=function(){return"WebSocket" in window&&WebSocket.prototype&&(WebSocket.prototype.send&&!!WebSocket.prototype.send.toString().match(/native/i))&&typeof WebSocket!=="undefined"};a.xdomainCheck=function(){return true}})();(function(){var a=io.Transport.flashsocket=function(){io.Transport.websocket.apply(this,arguments)};io.util.inherit(a,io.Transport.websocket);a.prototype.type="flashsocket";a.prototype.connect=function(){var b=this,c=arguments;WebSocket.__addTask(function(){io.Transport.websocket.prototype.connect.apply(b,c)});return this};a.prototype.send=function(){var b=this,c=arguments;WebSocket.__addTask(function(){io.Transport.websocket.prototype.send.apply(b,c)});return this};a.check=function(){if(typeof WebSocket=="undefined"||!("__addTask" in WebSocket)){return false}if(io.util.opera){return false}if("navigator" in window&&"plugins" in navigator&&navigator.plugins["Shockwave Flash"]){return !!navigator.plugins["Shockwave Flash"].description}if("ActiveXObject" in window){try{return !!new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(b){}}return false};a.xdomainCheck=function(){return true}})();(function(){var a=io.Transport.htmlfile=function(){io.Transport.XHR.apply(this,arguments)};io.util.inherit(a,io.Transport.XHR);a.prototype.type="htmlfile";a.prototype._get=function(){var b=this;this._open();window.attachEvent("onunload",function(){b._destroy()})};a.prototype._open=function(){this._doc=new ActiveXObject("htmlfile");this._doc.open();this._doc.write("<html></html>");this._doc.parentWindow.s=this;this._doc.close();var b=this._doc.createElement("div");this._doc.body.appendChild(b);this._iframe=this._doc.createElement("iframe");b.appendChild(this._iframe);this._iframe.src=this._prepareUrl()+"/"+(+new Date)};a.prototype._=function(c,d){this._onData(c);var b=d.getElementsByTagName("script")[0];b.parentNode.removeChild(b)};a.prototype._destroy=function(){if(this._iframe){this._iframe.src="about:blank";this._doc=null;CollectGarbage()}};a.prototype.disconnect=function(){this._destroy();return io.Transport.XHR.prototype.disconnect.call(this)};a.check=function(){if("ActiveXObject" in window){try{var b=new ActiveXObject("htmlfile");return b&&io.Transport.XHR.check()}catch(c){}}return false};a.xdomainCheck=function(){return false}})();(function(){var a=io.Transport["xhr-multipart"]=function(){io.Transport.XHR.apply(this,arguments)};io.util.inherit(a,io.Transport.XHR);a.prototype.type="xhr-multipart";a.prototype._get=function(){var b=this;this._xhr=this._request("","GET",true);this._xhr.onreadystatechange=function(){if(b._xhr.readyState==3){b._onData(b._xhr.responseText)}};this._xhr.send()};a.check=function(){return"XMLHttpRequest" in window&&"prototype" in XMLHttpRequest&&"multipart" in XMLHttpRequest.prototype};a.xdomainCheck=function(){return true}})();(function(){var a=new Function(),b=io.Transport["xhr-polling"]=function(){io.Transport.XHR.apply(this,arguments)};io.util.inherit(b,io.Transport.XHR);b.prototype.type="xhr-polling";b.prototype.connect=function(){if(io.util.ios||io.util.android){var c=this;io.util.load(function(){setTimeout(function(){io.Transport.XHR.prototype.connect.call(c)},10)})}else{io.Transport.XHR.prototype.connect.call(this)}};b.prototype._get=function(){var c=this;this._xhr=this._request(+new Date,"GET");if("onload" in this._xhr){this._xhr.onload=function(){c._onData(this.responseText);c._get()}}else{this._xhr.onreadystatechange=function(){var d;if(c._xhr.readyState==4){c._xhr.onreadystatechange=a;try{d=c._xhr.status}catch(f){}if(d==200){c._onData(c._xhr.responseText);c._get()}else{c._onDisconnect()}}}}this._xhr.send()};b.check=function(){return io.Transport.XHR.check()};b.xdomainCheck=function(){return io.Transport.XHR.xdomainCheck()}})();io.JSONP=[];JSONPPolling=io.Transport["jsonp-polling"]=function(){io.Transport.XHR.apply(this,arguments);this._insertAt=document.getElementsByTagName("script")[0];this._index=io.JSONP.length;io.JSONP.push(this)};io.util.inherit(JSONPPolling,io.Transport["xhr-polling"]);JSONPPolling.prototype.type="jsonp-polling";JSONPPolling.prototype._send=function(h){var l=this;if(!("_form" in this)){var b=document.createElement("FORM"),c=document.createElement("TEXTAREA"),a=this._iframeId="socket_io_iframe_"+this._index,g;b.style.position="absolute";b.style.top="-1000px";b.style.left="-1000px";b.target=a;b.method="POST";b.action=this._prepareUrl()+"/"+(+new Date)+"/"+this._index;c.name="data";b.appendChild(c);this._insertAt.parentNode.insertBefore(b,this._insertAt);document.body.appendChild(b);this._form=b;this._area=c}function d(){f();l._posting=false;l._checkSend()}function f(){if(l._iframe){l._form.removeChild(l._iframe)}try{g=document.createElement('<iframe name="'+l._iframeId+'">')}catch(m){g=document.createElement("iframe");g.name=l._iframeId}g.id=l._iframeId;l._form.appendChild(g);l._iframe=g}f();this._posting=true;this._area.value=h;try{this._form.submit()}catch(k){}if(this._iframe.attachEvent){g.onreadystatechange=function(){if(l._iframe.readyState=="complete"){d()}}}else{this._iframe.onload=d}};JSONPPolling.prototype._get=function(){var b=this,a=document.createElement("SCRIPT");if(this._script){this._script.parentNode.removeChild(this._script);this._script=null}a.async=true;a.src=this._prepareUrl()+"/"+(+new Date)+"/"+this._index;a.onerror=function(){b._onDisconnect()};this._insertAt.parentNode.insertBefore(a,this._insertAt);this._script=a};JSONPPolling.prototype._=function(){this._onData.apply(this,arguments);this._get();return this};JSONPPolling.check=function(){return true};JSONPPolling.xdomainCheck=function(){return true};(function(){var a=io.Socket=function(c,b){this.host=c||document.domain;this.options={secure:false,document:document,port:document.location.port||80,resource:"socket.io",transports:["websocket","flashsocket","htmlfile","xhr-multipart","xhr-polling","jsonp-polling"],transportOptions:{"xhr-polling":{timeout:25000},"jsonp-polling":{timeout:25000}},connectTimeout:5000,tryTransportsOnConnectTimeout:true,rememberTransport:true};io.util.merge(this.options,b);this.connected=false;this.connecting=false;this._events={};this.transport=this.getTransport();if(!this.transport&&"console" in window){console.error("No transport available")}};a.prototype.getTransport=function(e){var b=e||this.options.transports,c;if(this.options.rememberTransport&&!e){c=this.options.document.cookie.match("(?:^|;)\\s*socketio=([^;]*)");if(c){this._rememberedTransport=true;b=[decodeURIComponent(c[1])]}}for(var d=0,f;f=b[d];d++){if(io.Transport[f]&&io.Transport[f].check()&&(!this._isXDomain()||io.Transport[f].xdomainCheck())){return new io.Transport[f](this,this.options.transportOptions[f]||{})}}return null};a.prototype.connect=function(){if(this.transport&&!this.connected){if(this.connecting){this.disconnect()}this.connecting=true;this.transport.connect();if(this.options.connectTimeout){var b=this;setTimeout(function(){if(!b.connected){b.disconnect();if(b.options.tryTransportsOnConnectTimeout&&!b._rememberedTransport){var c=[],d=b.options.transports;for(var e=0,f;f=d[e];e++){if(f!=b.transport.type){c.push(f)}}if(c.length){b.transport=b.getTransport(c);b.connect()}}}},this.options.connectTimeout)}}return this};a.prototype.send=function(b){if(!this.transport||!this.transport.connected){return this._queue(b)}this.transport.send(b);return this};a.prototype.disconnect=function(){this.transport.disconnect();return this};a.prototype.on=function(b,c){if(!(b in this._events)){this._events[b]=[]}this._events[b].push(c);return this};a.prototype.fire=function(c,b){if(c in this._events){for(var d=0,e=this._events[c].length;d<e;d++){this._events[c][d].apply(this,b===undefined?[]:b)}}return this};a.prototype.removeEvent=function(d,e){if(d in this._events){for(var c=0,b=this._events[d].length;c<b;c++){if(this._events[d][c]==e){this._events[d].splice(c,1)}}}return this};a.prototype._queue=function(b){if(!("_queueStack" in this)){this._queueStack=[]}this._queueStack.push(b);return this};a.prototype._doQueue=function(){if(!("_queueStack" in this)||!this._queueStack.length){return this}this.transport.send(this._queueStack);this._queueStack=[];return this};a.prototype._isXDomain=function(){return this.host!==document.domain};a.prototype._onConnect=function(){this.connected=true;this.connecting=false;this._doQueue();if(this.options.rememberTransport){this.options.document.cookie="socketio="+encodeURIComponent(this.transport.type)}this.fire("connect")};a.prototype._onMessage=function(b){this.fire("message",[b])};a.prototype._onDisconnect=function(){var b=this.connected;this.connected=false;this.connecting=false;this._queueStack=[];if(b){this.fire("disconnect")}};a.prototype.addListener=a.prototype.addEvent=a.prototype.addEventListener=a.prototype.on})();var swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,e=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(e),l=c?/mac/.test(c):/mac/.test(e),g=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,d=!+"\v1",f=[0,0,0],m=null;if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){m=aB.plugins[ab].description;if(m&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;d=false;m=m.replace(/^.*\s+(\S+\s+\S+$)/,"$1");f[0]=parseInt(m.replace(/^(.*)\..*$/,"$1"),10);f[1]=parseInt(m.replace(/^.*\.(.*)\s.*$/,"$1"),10);f[2]=/[a-zA-Z]/.test(m)?parseInt(m.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof af.ActiveXObject!=aq){try{var k=new ActiveXObject(X);if(k){m=k.GetVariable("$version");if(m){d=true;m=m.split(" ")[1].split(",");f=[parseInt(m[0],10),parseInt(m[1],10),parseInt(m[2],10)]}}}catch(b){}}}return{w3:a,pv:f,wk:g,ie:d,win:h,mac:l}}(),aK=function(){if(!ah.w3){return}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);aP()}});if(af==top){(function(){if(ak){return}try{aL.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}aP()})()}}if(ah.wk){(function(){if(ak){return}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return}aP()})()}aC(aP)}}();function aP(){if(ak){return}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));b.parentNode.removeChild(b)}catch(a){return}ak=true;var d=Z.length;for(var c=0;c<d;c++){Z[c]()}}function aj(a){if(ak){a()}else{Z[Z.length]=a}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false)}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false)}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a)}else{if(typeof af.onload=="function"){var b=af.onload;af.onload=function(){b();a()}}else{af.onload=a}}}}}function aN(){if(aa){Y()}else{am()}}function Y(){var d=aL.getElementsByTagName("body")[0];var b=ar(aD);b.setAttribute("type",aE);var a=d.appendChild(b);if(a){var c=0;(function(){if(typeof a.GetVariable!=aq){var e=a.GetVariable("$version");if(e){e=e.split(" ")[1].split(",");ah.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}d.removeChild(b);a=null;am()})()}else{am()}}function am(){var g=aG.length;if(g>0){for(var h=0;h<g;h++){var c=aG[h].id;var n=aG[h].callbackFn;var a={success:false,id:c};if(ah.pv[0]>0){var k=aS(c);if(k){if(ao(aG[h].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);if(n){a.success=true;a.ref=av(c);n(a)}}else{if(aG[h].expressInstall&&au()){var e={};e.data=aG[h].expressInstall;e.width=k.getAttribute("width")||"0";e.height=k.getAttribute("height")||"0";if(k.getAttribute("class")){e.styleclass=k.getAttribute("class")}if(k.getAttribute("align")){e.align=k.getAttribute("align")}var f={};var d=k.getElementsByTagName("param");var m=d.length;for(var l=0;l<m;l++){if(d[l].getAttribute("name").toLowerCase()!="movie"){f[d[l].getAttribute("name")]=d[l].getAttribute("value")}}ae(e,f,c,n)}else{aF(k);if(n){n(a)}}}}}else{ay(c,true);if(n){var b=av(c);if(b&&typeof b.SetVariable!=aq){a.success=true;a.ref=b}n(a)}}}}}function av(b){var d=null;var c=aS(b);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){d=c}else{var a=c.getElementsByTagName(aD)[0];if(a){d=a}}}return d}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)}function ae(f,d,h,e){aU=true;ap=e||null;at={success:false,id:h};var a=aS(h);if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);ad=null}else{aJ=a;ad=h}f.id=ac;if(typeof f.width==aq||(!/%$/.test(f.width)&&parseInt(f.width,10)<310)){f.width="310"}if(typeof f.height==aq||(!/%$/.test(f.height)&&parseInt(f.height,10)<137)){f.height="137"}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;if(typeof d.flashvars!=aq){d.flashvars+="&"+c}else{d.flashvars=c}if(ah.ie&&ah.win&&a.readyState!=4){var g=ar("div");h+="SWFObjectNew";g.setAttribute("id",h);a.parentNode.insertBefore(g,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}aA(f,d,h)}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aO(a),b);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}else{a.parentNode.replaceChild(aO(a),a)}}function aO(b){var d=ar("div");if(ah.win&&ah.ie){d.innerHTML=b.innerHTML}else{var e=b.getElementsByTagName(aD)[0];if(e){var a=e.childNodes;if(a){var f=a.length;for(var c=0;c<f;c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){d.appendChild(a[c].cloneNode(true))}}}}}return d}function aA(e,g,c){var d,a=aS(c);if(ah.wk&&ah.wk<312){return d}if(a){if(typeof e.id==aq){e.id=c}if(ah.ie&&ah.win){var f="";for(var k in e){if(e[k]!=Object.prototype[k]){if(k.toLowerCase()=="data"){g.movie=e[k]}else{if(k.toLowerCase()=="styleclass"){f+=' class="'+e[k]+'"'}else{if(k.toLowerCase()!="classid"){f+=" "+k+'="'+e[k]+'"'}}}}}var h="";for(var l in g){if(g[l]!=Object.prototype[l]){h+='<param name="'+l+'" value="'+g[l]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>";ag[ag.length]=e.id;d=aS(e.id)}else{var b=ar(aD);b.setAttribute("type",aE);for(var m in e){if(e[m]!=Object.prototype[m]){if(m.toLowerCase()=="styleclass"){b.setAttribute("class",e[m])}else{if(m.toLowerCase()!="classid"){b.setAttribute(m,e[m])}}}}for(var n in g){if(g[n]!=Object.prototype[n]&&n.toLowerCase()!="movie"){aQ(b,n,g[n])}}a.parentNode.replaceChild(b,a);d=b}}return d}function aQ(b,d,c){var a=ar("param");a.setAttribute("name",d);a.setAttribute("value",c);b.appendChild(a)}function aw(a){var b=aS(a);if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";(function(){if(b.readyState==4){aT(a)}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.removeChild(b)}}}function aT(a){var b=aS(a);if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null}}b.parentNode.removeChild(b)}}function aS(a){var c=null;try{c=aL.getElementById(a)}catch(b){}return c}function ar(a){return aL.createElement(a)}function aM(a,c,b){a.attachEvent(c,b);al[al.length]=[a,c,b]}function ao(a){var b=ah.pv,c=a.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false}function az(b,f,a,c){if(ah.ie&&ah.mac){return}var e=aL.getElementsByTagName("head")[0];if(!e){return}var g=(a&&typeof a=="string")?a:"screen";if(c){aH=null;an=null}if(!aH||an!=g){var d=ar("style");d.setAttribute("type","text/css");d.setAttribute("media",g);aH=e.appendChild(d);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]}an=g}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,f)}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+f+"}"))}}}function ay(a,c){if(!aI){return}var b=c?"visible":"hidden";if(ak&&aS(a)){aS(a).style.visibility=b}else{az("#"+a,"visibility:"+b)}}function ai(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;for(var b=0;b<a;b++){al[b][0].detachEvent(al[b][1],al[b][2])}var d=ag.length;for(var c=0;c<d;c++){aw(ag[c])}for(var e in ah){ah[e]=null}ah=null;for(var f in swfobject){swfobject[f]=null}swfobject=null})}}();return{registerObject:function(a,e,c,b){if(ah.w3&&a&&e){var d={};d.id=a;d.swfVersion=e;d.expressInstall=c;d.callbackFn=b;aG[aG.length]=d;ay(a,false)}else{if(b){b({success:false,id:a})}}},getObjectById:function(a){if(ah.w3){return av(a)}},embedSWF:function(m,e,h,f,c,a,b,k,g,l){var d={success:false,id:e};if(ah.w3&&!(ah.wk&&ah.wk<312)&&m&&e&&h&&f&&c){ay(e,false);aj(function(){h+="";f+="";var s={};if(g&&typeof g===aD){for(var q in g){s[q]=g[q]}}s.data=m;s.width=h;s.height=f;var p={};if(k&&typeof k===aD){for(var r in k){p[r]=k[r]}}if(b&&typeof b===aD){for(var n in b){if(typeof p.flashvars!=aq){p.flashvars+="&"+n+"="+b[n]}else{p.flashvars=n+"="+b[n]}}}if(ao(c)){var o=aA(s,p,e);if(s.id==e){ay(e,true)}d.success=true;d.ref=o}else{if(a&&au()){s.data=a;ae(s,p,e,l);return}else{ay(e,true)}}if(l){l(d)}})}else{if(l){l(d)}}},switchOffAutoHideShow:function(){aI=false},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c)}else{return undefined}},showExpressInstall:function(b,a,d,c){if(ah.w3&&au()){ae(b,a,d,c)}},removeSWF:function(a){if(ah.w3){aw(a)}},createCSS:function(b,a,c,d){if(ah.w3){az(b,a,c,d)}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;if(a){if(/\?/.test(a)){a=a.split("?")[1]}if(b==null){return ai(a)}var c=a.split("&");for(var d=0;d<c.length;d++){if(c[d].substring(0,c[d].indexOf("="))==b){return ai(c[d].substring((c[d].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(aU){var a=aS(ac);if(a&&aJ){a.parentNode.replaceChild(aJ,a);if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block"}}if(ap){ap(at)}}aU=false}}}}();function FABridge(b,a){this.target=b;this.remoteTypeCache={};this.remoteInstanceCache={};this.remoteFunctionCache={};this.localFunctionCache={};this.bridgeID=FABridge.nextBridgeID++;this.name=a;this.nextLocalFuncID=0;FABridge.instances[this.name]=this;FABridge.idMap[this.bridgeID]=this;return this}FABridge.TYPE_ASINSTANCE=1;FABridge.TYPE_ASFUNCTION=2;FABridge.TYPE_JSFUNCTION=3;FABridge.TYPE_ANONYMOUS=4;FABridge.initCallbacks={};FABridge.userTypes={};FABridge.addToUserTypes=function(){for(var a=0;a<arguments.length;a++){FABridge.userTypes[arguments[a]]={typeName:arguments[a],enriched:false}}};FABridge.argsToArray=function(b){var a=[];for(var c=0;c<b.length;c++){a[c]=b[c]}return a};function instanceFactory(a){this.fb_instance_id=a;return this}function FABridge__invokeJSFunction(a){var c=a[0];var b=a.concat();b.shift();var d=FABridge.extractBridgeFromID(c);return d.invokeLocalFunction(c,b)}FABridge.addInitializationCallback=function(b,d){var c=FABridge.instances[b];if(c!=undefined){d.call(c);return}var a=FABridge.initCallbacks[b];if(a==null){FABridge.initCallbacks[b]=a=[]}a.push(d)};function FABridge__bridgeInitialized(g){var a=document.getElementsByTagName("object");var f=a.length;var d=[];if(f>0){for(var u=0;u<f;u++){if(typeof a[u].SetVariable!="undefined"){d[d.length]=a[u]}}}var n=document.getElementsByTagName("embed");var b=n.length;var t=[];if(b>0){for(var r=0;r<b;r++){if(typeof n[r].SetVariable!="undefined"){t[t.length]=n[r]}}}var c=d.length;var s=t.length;var h="bridgeName="+g;if((c==1&&!s)||(c==1&&s==1)){FABridge.attachBridge(d[0],g)}else{if(s==1&&!c){FABridge.attachBridge(t[0],g)}else{var v=false;if(c>1){for(var q=0;q<c;q++){var x=d[q].childNodes;for(var p=0;p<x.length;p++){var e=x[p];if(e.nodeType==1&&e.tagName.toLowerCase()=="param"&&e.name.toLowerCase()=="flashvars"&&e.value.indexOf(h)>=0){FABridge.attachBridge(d[q],g);v=true;break}}if(v){break}}}if(!v&&s>1){for(var o=0;o<s;o++){var w=t[o].attributes.getNamedItem("flashVars").nodeValue;if(w.indexOf(h)>=0){FABridge.attachBridge(t[o],g);break}}}}}return true}FABridge.nextBridgeID=0;FABridge.instances={};FABridge.idMap={};FABridge.refCount=0;FABridge.extractBridgeFromID=function(b){var a=(b>>16);return FABridge.idMap[a]};FABridge.attachBridge=function(a,c){var b=new FABridge(a,c);FABridge[c]=b;var e=FABridge.initCallbacks[c];if(e==null){return}for(var d=0;d<e.length;d++){e[d].call(b)}delete FABridge.initCallbacks[c]};FABridge.blockedMethods={toString:true,get:true,set:true,call:true};FABridge.prototype={root:function(){return this.deserialize(this.target.getRoot())},releaseASObjects:function(){return this.target.releaseASObjects()},releaseNamedASObject:function(b){if(typeof(b)!="object"){return false}else{var a=this.target.releaseNamedASObject(b.fb_instance_id);return a}},create:function(a){return this.deserialize(this.target.create(a))},makeID:function(a){return(this.bridgeID<<16)+a},getPropertyFromAS:function(b,a){if(FABridge.refCount>0){throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.")}else{FABridge.refCount++;retVal=this.target.getPropFromAS(b,a);retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},setPropertyInAS:function(c,b,a){if(FABridge.refCount>0){throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.")}else{FABridge.refCount++;retVal=this.target.setPropInAS(c,b,this.serialize(a));retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},callASFunction:function(b,a){if(FABridge.refCount>0){throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.")}else{FABridge.refCount++;retVal=this.target.invokeASFunction(b,this.serialize(a));retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},callASMethod:function(b,c,a){if(FABridge.refCount>0){throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.")}else{FABridge.refCount++;a=this.serialize(a);retVal=this.target.invokeASMethod(b,c,a);retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},invokeLocalFunction:function(d,b){var a;var c=this.localFunctionCache[d];if(c!=undefined){a=this.serialize(c.apply(null,this.deserialize(b)))}return a},getTypeFromName:function(a){return this.remoteTypeCache[a]},createProxy:function(c,b){var d=this.getTypeFromName(b);instanceFactory.prototype=d;var a=new instanceFactory(c);this.remoteInstanceCache[c]=a;return a},getProxy:function(a){return this.remoteInstanceCache[a]},addTypeDataToCache:function(e){var c=new ASProxy(this,e.name);var b=e.accessors;for(var d=0;d<b.length;d++){this.addPropertyToType(c,b[d])}var a=e.methods;for(var d=0;d<a.length;d++){if(FABridge.blockedMethods[a[d]]==undefined){this.addMethodToType(c,a[d])}}this.remoteTypeCache[c.typeName]=c;return c},addPropertyToType:function(a,e){var f=e.charAt(0);var b;var d;if(f>="a"&&f<="z"){d="get"+f.toUpperCase()+e.substr(1);b="set"+f.toUpperCase()+e.substr(1)}else{d="get"+e;b="set"+e}a[b]=function(c){this.bridge.setPropertyInAS(this.fb_instance_id,e,c)};a[d]=function(){return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id,e))}},addMethodToType:function(a,b){a[b]=function(){return this.bridge.deserialize(this.bridge.callASMethod(this.fb_instance_id,b,FABridge.argsToArray(arguments)))}},getFunctionProxy:function(a){var b=this;if(this.remoteFunctionCache[a]==null){this.remoteFunctionCache[a]=function(){b.callASFunction(a,FABridge.argsToArray(arguments))}}return this.remoteFunctionCache[a]},getFunctionID:function(a){if(a.__bridge_id__==undefined){a.__bridge_id__=this.makeID(this.nextLocalFuncID++);this.localFunctionCache[a.__bridge_id__]=a}return a.__bridge_id__},serialize:function(d){var a={};var c=typeof(d);if(c=="number"||c=="string"||c=="boolean"||c==null||c==undefined){a=d}else{if(d instanceof Array){a=[];for(var b=0;b<d.length;b++){a[b]=this.serialize(d[b])}}else{if(c=="function"){a.type=FABridge.TYPE_JSFUNCTION;a.value=this.getFunctionID(d)}else{if(d instanceof ASProxy){a.type=FABridge.TYPE_ASINSTANCE;a.value=d.fb_instance_id}else{a.type=FABridge.TYPE_ANONYMOUS;a.value=d}}}}return a},deserialize:function(e){var a;var c=typeof(e);if(c=="number"||c=="string"||c=="boolean"||e==null||e==undefined){a=this.handleError(e)}else{if(e instanceof Array){a=[];for(var b=0;b<e.length;b++){a[b]=this.deserialize(e[b])}}else{if(c=="object"){for(var b=0;b<e.newTypes.length;b++){this.addTypeDataToCache(e.newTypes[b])}for(var d in e.newRefs){this.createProxy(d,e.newRefs[d])}if(e.type==FABridge.TYPE_PRIMITIVE){a=e.value}else{if(e.type==FABridge.TYPE_ASFUNCTION){a=this.getFunctionProxy(e.value)}else{if(e.type==FABridge.TYPE_ASINSTANCE){a=this.getProxy(e.value)}else{if(e.type==FABridge.TYPE_ANONYMOUS){a=e.value}}}}}}}return a},addRef:function(a){this.target.incRef(a.fb_instance_id)},release:function(a){this.target.releaseRef(a.fb_instance_id)},handleError:function(b){if(typeof(b)=="string"&&b.indexOf("__FLASHERROR")==0){var a=b.split("||");if(FABridge.refCount>0){FABridge.refCount--}throw new Error(a[1]);return b}else{return b}}};ASProxy=function(b,a){this.bridge=b;this.typeName=a;return this};ASProxy.prototype={get:function(a){return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id,a))},set:function(b,a){this.bridge.setPropertyInAS(this.fb_instance_id,b,a)},call:function(b,a){this.bridge.callASMethod(this.fb_instance_id,b,a)},addRef:function(){this.bridge.addRef(this)},release:function(){this.bridge.release(this)}};(function(){if(window.WebSocket){return}var a=window.console;if(!a){a={log:function(){},error:function(){}}}if(!swfobject.hasFlashPlayerVersion("9.0.0")){a.error("Flash Player is not installed.");return}if(location.protocol=="file:"){a.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://...")}WebSocket=function(e,h,d,g,f){var c=this;c.readyState=WebSocket.CONNECTING;c.bufferedAmount=0;setTimeout(function(){WebSocket.__addTask(function(){c.__createFlash(e,h,d,g,f)})},1)};WebSocket.prototype.__createFlash=function(e,h,d,g,f){var c=this;c.__flash=WebSocket.__flash.create(e,h,d||null,g||0,f||null);c.__flash.addEventListener("open",function(k){try{c.readyState=c.__flash.getReadyState();if(c.__timer){clearInterval(c.__timer)}if(window.opera){c.__timer=setInterval(function(){c.__handleMessages()},500)}if(c.onopen){c.onopen()}}catch(l){a.error(l.toString())}});c.__flash.addEventListener("close",function(k){try{c.readyState=c.__flash.getReadyState();if(c.__timer){clearInterval(c.__timer)}if(c.onclose){c.onclose()}}catch(l){a.error(l.toString())}});c.__flash.addEventListener("message",function(){try{c.__handleMessages()}catch(k){a.error(k.toString())}});c.__flash.addEventListener("error",function(k){try{if(c.__timer){clearInterval(c.__timer)}if(c.onerror){c.onerror()}}catch(l){a.error(l.toString())}});c.__flash.addEventListener("stateChange",function(k){try{c.readyState=c.__flash.getReadyState();c.bufferedAmount=k.getBufferedAmount()}catch(l){a.error(l.toString())}})};WebSocket.prototype.send=function(d){if(this.__flash){this.readyState=this.__flash.getReadyState()}if(!this.__flash||this.readyState==WebSocket.CONNECTING){throw"INVALID_STATE_ERR: Web Socket connection has not been established"}var c=this.__flash.send(encodeURIComponent(d));if(c<0){return true}else{this.bufferedAmount=c;return false}};WebSocket.prototype.close=function(){var c=this;if(!c.__flash){return}c.readyState=c.__flash.getReadyState();if(c.readyState==WebSocket.CLOSED||c.readyState==WebSocket.CLOSING){return}c.__flash.close();c.readyState=WebSocket.CLOSED;if(c.__timer){clearInterval(c.__timer)}if(c.onclose){setTimeout(c.onclose,1)}};WebSocket.prototype.addEventListener=function(d,e,c){if(!("__events" in this)){this.__events={}}if(!(d in this.__events)){this.__events[d]=[];if("function"==typeof this["on"+d]){this.__events[d].defaultHandler=this["on"+d];this["on"+d]=this.__createEventHandler(this,d)}}this.__events[d].push(e)};WebSocket.prototype.removeEventListener=function(e,f,c){if(!("__events" in this)){this.__events={}}if(!(e in this.__events)){return}for(var d=this.__events.length;d>-1;--d){if(f===this.__events[e][d]){this.__events[e].splice(d,1);break}}};WebSocket.prototype.dispatchEvent=function(e){if(!("__events" in this)){throw"UNSPECIFIED_EVENT_TYPE_ERR"}if(!(e.type in this.__events)){throw"UNSPECIFIED_EVENT_TYPE_ERR"}for(var d=0,c=this.__events[e.type].length;d<c;++d){this.__events[e.type][d](e);if(e.cancelBubble){break}}if(false!==e.returnValue&&"function"==typeof this.__events[e.type].defaultHandler){this.__events[e.type].defaultHandler(e)}};WebSocket.prototype.__handleMessages=function(){var c=this.__flash.readSocketData();for(var d=0;d<c.length;d++){var f=decodeURIComponent(c[d]);try{if(this.onmessage){var g;if(window.MessageEvent){g=document.createEvent("MessageEvent");g.initMessageEvent("message",false,false,f,null,null,window,null)}else{g={data:f}}this.onmessage(g)}}catch(g){a.error(g.toString())}}};WebSocket.prototype.__createEventHandler=function(c,d){return function(g){var f=new b();f.initEvent(d,true,true);f.target=f.currentTarget=c;for(var e in g){f[e]=g[e]}c.dispatchEvent(f,arguments)}};function b(){}b.prototype.cancelable=true;b.prototype.cancelBubble=false;b.prototype.preventDefault=function(){if(this.cancelable){this.returnValue=false}};b.prototype.stopPropagation=function(){this.cancelBubble=true};b.prototype.initEvent=function(c,e,d){this.type=c;this.cancelable=d;this.timeStamp=new Date()};WebSocket.CONNECTING=0;WebSocket.OPEN=1;WebSocket.CLOSING=2;WebSocket.CLOSED=3;WebSocket.__tasks=[];WebSocket.__initialize=function(){if(WebSocket.__swfLocation){window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation}if(!window.WEB_SOCKET_SWF_LOCATION){a.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");return}var c=document.createElement("div");c.id="webSocketContainer";c.style.position="absolute";if(WebSocket.__isFlashLite()){c.style.left="0px";c.style.top="0px"}else{c.style.left="-100px";c.style.top="-100px"}var d=document.createElement("div");d.id="webSocketFlash";c.appendChild(d);document.body.appendChild(c);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","9.0.0",null,{bridgeName:"webSocket"},{hasPriority:true,allowScriptAccess:"always"},null,function(f){if(!f.success){a.error("[WebSocket] swfobject.embedSWF failed")}});FABridge.addInitializationCallback("webSocket",function(){try{WebSocket.__flash=FABridge.webSocket.root();WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var f=0;f<WebSocket.__tasks.length;++f){WebSocket.__tasks[f]()}WebSocket.__tasks=[]}catch(g){a.error("[WebSocket] "+g.toString())}})};WebSocket.__addTask=function(c){if(WebSocket.__flash){c()}else{WebSocket.__tasks.push(c)}};WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes){return false}var c=window.navigator.mimeTypes["application/x-shockwave-flash"];if(!c||!c.enabledPlugin||!c.enabledPlugin.filename){return false}return c.enabledPlugin.filename.match(/flashlite/i)?true:false};window.webSocketLog=function(c){a.log(decodeURIComponent(c))};window.webSocketError=function(c){a.error(decodeURIComponent(c))};if(!window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION){if(window.addEventListener){window.addEventListener("load",WebSocket.__initialize,false)}else{window.attachEvent("onload",WebSocket.__initialize)}}})();